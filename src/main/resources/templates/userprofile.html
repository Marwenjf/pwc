<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>PWC | Profile</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" th:href="@{dist/css/adminlte.min.css}">
    <!-- Google Font: Source Sans Pro -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
</head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">
    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand bg-white navbar-light border-bottom">
        <!-- Left navbar links -->
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" data-widget="pushmenu" th:href="@{/}"><i class="fa fa-bars"></i></a>
            </li>
            <li class="nav-item d-none d-sm-inline-block">
                <a th:href="@{/}" class="nav-link">Home</a>
            </li>
            <li class="nav-item d-none d-sm-inline-block">
                <a th:href="@{/}" class="nav-link">Profile</a>
            </li>
        </ul>

        <!-- SEARCH FORM -->
        <form class="form-inline ml-3" method="post" th:action="@{/}">
            <div class="input-group input-group-sm">
                <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
                <div class="input-group-append">
                    <button class="btn btn-navbar" type="submit">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </form>

        <!-- Right navbar links -->
        <ul class="navbar-nav ml-auto">
            <!-- Messages Dropdown Menu -->
            <li class="nav-item dropdown">
                <a class="nav-link" data-toggle="dropdown" th:href="@{/}">
                    <i class="fa fa-comments-o"></i>
                    <span class="badge badge-danger navbar-badge">3</span>
                </a>
                <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                    <a th:href="@{/}" class="dropdown-item">
                        <!-- Message Start -->
                        <div class="media">
                            <img th:src="@{dist/img/user1-128x128.jpg}" alt="User Avatar" class="img-size-50 mr-3 img-circle">
                            <div class="media-body">
                                <h3 class="dropdown-item-title">
                                    Brad Diesel
                                    <span class="float-right text-sm text-danger"><i class="fa fa-star"></i></span>
                                </h3>
                                <p class="text-sm">Call me whenever you can...</p>
                                <p class="text-sm text-muted"><i class="fa fa-clock-o mr-1"></i> 4 Hours Ago</p>
                            </div>
                        </div>
                        <!-- Message End -->
                    </a>
                    <div class="dropdown-divider"></div>
                    <a th:href="@{/}" class="dropdown-item">
                        <!-- Message Start -->
                        <div class="media">
                            <img th:src="@{dist/img/user8-128x128.jpg}" alt="User Avatar" class="img-size-50 img-circle mr-3">
                            <div class="media-body">
                                <h3 class="dropdown-item-title">
                                    John Pierce
                                    <span class="float-right text-sm text-muted"><i class="fa fa-star"></i></span>
                                </h3>
                                <p class="text-sm">I got your message bro</p>
                                <p class="text-sm text-muted"><i class="fa fa-clock-o mr-1"></i> 4 Hours Ago</p>
                            </div>
                        </div>
                        <!-- Message End -->
                    </a>
                    <div class="dropdown-divider"></div>
                    <a th:href="@{/}" class="dropdown-item">
                        <!-- Message Start -->
                        <div class="media">
                            <img th:src="@{dist/img/user3-128x128.jpg}" alt="User Avatar" class="img-size-50 img-circle mr-3">
                            <div class="media-body">
                                <h3 class="dropdown-item-title">
                                    Nora Silvester
                                    <span class="float-right text-sm text-warning"><i class="fa fa-star"></i></span>
                                </h3>
                                <p class="text-sm">The subject goes here</p>
                                <p class="text-sm text-muted"><i class="fa fa-clock-o mr-1"></i> 4 Hours Ago</p>
                            </div>
                        </div>
                        <!-- Message End -->
                    </a>
                    <div class="dropdown-divider"></div>
                    <a th:href="@{/messages}" class="dropdown-item dropdown-footer">See All Messages</a>
                </div>
            </li>
            <!-- Notifications Dropdown Menu -->
            <li class="nav-item dropdown">
                <a class="nav-link" data-toggle="dropdown" th:href="@{/}">
                    <i class="fa fa-bell-o"></i>
                    <span class="badge badge-warning navbar-badge" th:if="${invitations.size()>0}" th:text="${invitations.size()}"></span>
                </a>
                <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                    <span class="dropdown-item dropdown-header" th:if="${invitations.size() == 0}" th:text="${invitations.size()}+' Invitations'"></span>
                    <span class="dropdown-item dropdown-header" th:if="${invitations.size() > 0}" th:text="${invitations.size()}+' Invitations'"></span>
                    <div class="info-box bg-danger" th:if="${invitations.size() == 0}">
                        <div class="info-box-content">
                            <span class="info-box-text">Invitations</span>
                            <span class="info-box-number">Not found</span>
                        </div>
                        <!-- /.info-box-content -->
                    </div>
                    <ul class="todo-list" th:if="${invitations.size() > 0}">
                        <li th:each="invitation:${invitations}">
                            <div class="dropdown-divider"></div>
                            <!-- drag handle -->
                            <span class="handle">
                      <i class="fa fa-ellipsis-v"></i>
                      <i class="fa fa-ellipsis-v"></i>
                    </span>


                            <span class="text" th:text="${invitation.groupe.groupName}"> </span>
                            <!-- Emphasis label -->
                            <small class="badge badge-danger" th:text="${invitation.getCreated()}"><i class="fa fa-clock-o"></i></small>
                            <!-- General tools such as edit or delete-->
                            <div class="tools">
                                <a th:href="@{/accept(id=${invitation.getIdInvitation()})}"><i class="fa fa-check"></i></a>
                                <a th:href="@{/reject(id=${invitation.getIdInvitation()})}"><i class="fa fa-trash-o"></i></a>
                            </div>
                            <div class="dropdown-divider"></div>
                        </li>
                    </ul>

                    <a th:href="@{/}" class="dropdown-item dropdown-footer">See All Notifications</a>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-widget="control-sidebar" data-slide="true" th:href="@{/}">
                    <i class="fa fa-th-large"></i>
                </a>
            </li>
        </ul>
    </nav>
    <!-- /.navbar -->

    <!-- Main Sidebar Container -->
    <aside class="main-sidebar sidebar-dark-primary elevation-4">
        <!-- Brand Logo -->
        <a th:href="@{/}" class="brand-link">
            <img th:src="@{dist/img/AdminLTELogo.png}"
                 alt="AdminLTE Logo"
                 class="brand-image img-circle elevation-3"
                 style="opacity: .8">
            <span class="brand-text font-weight-light">PWC</span>
        </a>

        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Sidebar user (optional) -->
            <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                <div class="image">
                    <img th:src="@{getpicture(userName=${#httpServletRequest.remoteUser})}" class="img-circle elevation-2" alt="User Image">
                </div>
                <div class="info">
                    <a th:href="@{/profile}" class="d-block" th:inline="text">[[${#httpServletRequest.remoteUser}]]</a>
                </div>
            </div>

            <!-- Sidebar Menu -->
            <nav class="mt-2">
                <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">

                    <li class="nav-item">
                        <a href="/" class="nav-link">
                            <i class="nav-icon fa fa-home"></i>
                            <p>
                                Home

                            </p>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a th:href="@{/profile}" class="nav-link">
                            <i class="nav-icon fa fa-user"></i>
                            <p>
                                Profile

                            </p>
                        </a>
                    </li>
                    <li class="nav-item has-treeview">
                        <a th:href="@{/mydocuments}" class="nav-link">
                            <i class="nav-icon fa fa-file"></i>
                            <p>
                                My documents

                            </p>
                        </a>

                    </li>
                    <li class="nav-item has-treeview">
                        <a href="#" class="nav-link">
                            <i class="nav-icon fa fa-users"></i>
                            <p>
                                Groups
                                <i class="right fa fa-angle-left"></i>
                            </p>
                        </a>
                        <ul class="nav nav-treeview">
                            <li class="nav-item">
                                <a th:href="@{/groups}" class="nav-link">
                                    <i class="fa fa-circle-o nav-icon"></i>
                                    <p>All groups</p>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a th:href="@{/mygroups}" class="nav-link">
                                    <i class="fa fa-circle-o nav-icon"></i>
                                    <p>My groups</p>
                                </a>
                            </li>

                        </ul>
                    </li>
                    <li class="nav-item">
                        <a href="/messages" class="nav-link">
                            <i class="nav-icon fa fa-paper-plane"></i>
                            <p>
                                Messages

                            </p>
                        </a>

                    </li>
                    <li class="nav-item">
                        <a href="/login?logout" class="nav-link">
                            <i class="nav-icon fa fa-sign-out"></i>
                            <p>
                                Logout

                            </p>
                        </a>

                    </li>

                </ul>


            </nav>
            <!-- /.sidebar-menu -->
        </div>
        <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1>Profile</h1>
                    </div>
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
                            <li class="breadcrumb-item active" th:text="${userProfile.getUsername()}"></li>
                        </ol>
                    </div>
                </div>
            </div><!-- /.container-fluid -->
        </section>

        <!-- Main content -->
        <section class="content">
            <div class="container-fluid">
                <div class="card card-widget widget-user">
                    <div class="widget-user-header text-white"
                         style="background: url('../dist/img/photo1.png') center center;">
                        <h3 class="widget-user-username" th:text="${userProfile.getUsername()}"></h3>
                        <h5 class="widget-user-desc">User</h5>
                    </div>
                    <div class="widget-user-image">
                        <img class="img-circle" th:src="@{getpicture(userName=${userProfile.getUsername()})}" alt="User Avatar">
                    </div>
                    <div class="card-footer">
                        <div class="row">
                            <div class="col-sm-4 border-right">
                                <div class="description-block">
                                    <h5 class="description-header" th:text="${userProfile.getMyGroups().size()}"></h5>
                                    <span class="description-text">GROUPS</span>
                                </div>
                            </div>
                            <div class="col-sm-4 border-right">
                                <div class="description-block">
                                    <h5 class="description-header" th:text="${userProfile.getMyPersonalDocuments().size()}"></h5>
                                    <span class="description-text">DOCUMENTS</span>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="description-block">
                                    <h5 class="description-header" th:text="${comments.size()}"></h5>
                                    <span class="description-text">COMMENTS</span>
                                </div>
                            </div>

                        </div>
                        <!-- /.row -->
                    </div>
                </div>
                <div>
                    <div class="card">
                        <div class="card-header">
                            <ul class="nav nav-pills">
                                <li class="nav-item"><a class="nav-link active" href="#activity" data-toggle="tab">Activity</a></li>
                                <li class="nav-item"><a class="nav-link" href="#timeline" data-toggle="tab">Timeline</a></li>
                            </ul>
                        </div><!-- /.card-header -->
                        <div class="card-body">
                            <div class="tab-content">
                                <div class="active tab-pane" id="activity">
                                    <!-- Post -->
                                    <div class="post">
                                        <div class="user-block">
                                            <img class="img-circle img-bordered-sm" th:src="@{getpicture(userName=${userProfile.getUsername()})}" alt="user image">
                                            <span class="username">
                          <a href="#" th:text="${userProfile.getUsername()}"></a>
                          <a href="#" class="float-right btn-tool"><i class="fa fa-times"></i></a>
                        </span>
                                            <span class="description" th:text="${userProfile.getCreated()}"></span>
                                        </div>
                                        <p th:text="${userProfile.getBiography()}"></p>
                                        <p>
                                             <div class="card-body">
                                            <div class="direct-chat-messages">
                                                <div class="direct-chat-msg" th:each="cmnt:${comments}">
                                                    <div class="direct-chat-info clearfix">
                                                        <span class="direct-chat-name float-left" th:text="${cmnt.getSender().getUsername()}"></span>
                                                        <span class="direct-chat-timestamp float-right" th:text="${cmnt.getCreated()}"></span>
                                                    </div>
                                                    <img class="direct-chat-img" th:src="@{getpicture(userName=${cmnt.getSender().getUsername()})}" alt="Message User Image">
                                                    <div class="direct-chat-text" th:text="${cmnt.getContent()}">
                                                        gggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
                                                    </div>
                                                </div>

                                            </div>

                                        </div>
                                        <!-- /.card-body -->
                                        <div class="card-footer">
                                            <form th:action="@{commnt(userName=${username})}" method="post" th:object="${comment}">
                                                <div class="input-group">
                                                    <input type="text" th:field="*{content}" placeholder="Type Message ..." class="form-control">
                                                    <span class="input-group-append">
                      <button type="submit" class="btn btn-primary">Send</button>
                    </span>
                                                </div>
                                            </form>
                                        </div>
                                        <!-- /.card-footer-->
                                    </div>
                                    <!-- /.post -->

                                    <!-- Post -->
                                    <div class="post clearfix" th:each="groupe:${userProfile.getMyGroups()}">
                                        <div class="user-block">
                                            <img class="img-circle img-bordered-sm" th:src="@{dist/img/user7-128x128.jpg}" alt="User Image">
                                            <span class="username">
                          <a th:href="@{group(idGroupe=${groupe.getId()})}" th:text="${groupe.getGroupName()}"></a>
                          <a href="#" class="float-right btn-tool"><i class="fa fa-times"></i></a>
                        </span>
                                            <span class="description" th:text="${groupe.getCreated()}"></span>
                                        </div>
                                        <p>
                                            Lorem ipsum represents a long-held tradition for designers,
                                            typographers and the like. Some people hate it and argue for
                                            its demise, but others ignore the hate as they create awesome
                                            tools to help create filler text for everyone from bacon lovers
                                            to Charlie Sheen fans.
                                        </p>

                                        <form class="form-horizontal">
                                            <div class="input-group input-group-sm mb-0">
                                                <input class="form-control form-control-sm" placeholder="Response">
                                                <div class="input-group-append">
                                                    <button type="submit" class="btn btn-danger">Send</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <!-- /.post -->

                                    <!-- Post -->
                                    <div class="post">
                                        <div class="user-block">
                                            <img class="img-circle img-bordered-sm" th:src="@{getpicture(userName=${userProfile.getUsername()})}" alt="User Image">
                                            <span class="username">
                          <a href="#" th:text="${userProfile.getUsername()}"></a>
                          <a href="#" class="float-right btn-tool"><i class="fa fa-times"></i></a></span>
                                            <span class="description" th:text="'Posted '+${userProfile.getMyPersonalDocuments().size()+' files'}"></span>
                                        </div>
                                        <div class="card">
                                            <div class="card-header">
                                                <h3 class="card-title" th:text="${userProfile.getUsername()+' s documents'}"></h3>
                                            </div>
                                            <nav class="navbar navbar-expand bg-white navbar-light">


                                                <!-- SEARCH FORM -->
                                                <form class="form-inline ml-3" method="get" th:action="@{/userprofile}">
                                                    <div class="input-group input-group-sm">
                                                        <input class="form-control form-control-navbar" type="text" name="search" placeholder="Search" aria-label="Search" th:value="${search}">
                                                        <div class="input-group-append">
                                                            <button class="btn btn-navbar" type="submit">
                                                                <i class="fa fa-search"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </form>


                                            </nav>
                                            <!-- /.card-header -->
                                        <!--    <div class="card-body">
                                                <table id="example2" class="table table-bordered table-striped">
                                                    <thead>
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Description</th>
                                                        <th>Visibility</th>
                                                        <th>Created at</th>
                                                        <th>Download</th>

                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr th:each="m:${myDocuments.content}" th:if="${m.getPersonalDocumentVisibility() == 'public'}">
                                                        <td ><a  th:text="${m.getPersonalDocumentName()}"></a></td>
                                                        <td ><a  th:text="${m.getPersonalDocumentDescription()}"></a></td>
                                                        <td ><a  th:text="${m.getPersonalDocumentVisibility()}"></a></td>
                                                        <td ><a  th:text="${m.getCreated()}"></a></td>
                                                        <td th:if="${m.getPersonalDocumentName().contains('.txt')}"><a  th:href="@{getfiletxt(fileName='/home/marwen/Bureau/uploads/'+${m.getPersonalDocumentName()})}" class="btn btn-success nav-icon fa fa-edit"></a></td>
                                                        <td th:if="${m.getPersonalDocumentName().contains('.png')}"><a  th:href="@{getfileimgpng(fileName='/home/marwen/Bureau/uploads/'+${m.getPersonalDocumentName()})}" class="btn btn-success nav-icon fa fa-edit"></a></td>
                                                        <td th:if="${m.getPersonalDocumentName().contains('.jpg')}"><a  th:href="@{getfileimgjpg(fileName='/home/marwen/Bureau/uploads/'+${m.getPersonalDocumentName()})}" class="btn btn-success nav-icon fa fa-edit"></a></td>
                                                        <td th:if="${m.getPersonalDocumentName().contains('.pdf')}"><a  th:href="@{getfile(fileName='/home/marwen/Bureau/uploads/'+${m.getPersonalDocumentName()})}" class="btn btn-success nav-icon fa fa-edit"></a></td>

                                                    </tr>
                                                    </tbody>
                                                    <tfoot>
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Description</th>
                                                        <th>Visibility</th>
                                                        <th>Created at</th>
                                                        <th>Download</th>

                                                    </tr>
                                                    </tfoot>
                                                </table>
                                            </div>-->
                                            <div class="card-footer bg-white">
                                                <ul class="mailbox-attachments clearfix">
                                                    <li th:each="m:${myDocuments.content}" th:if="${m.getPersonalDocumentVisibility() == 'public'}">
                                                        <span class="mailbox-attachment-icon" th:if="${m.getPersonalDocumentName().contains('.pdf')}"><i class="fa fa-file-pdf-o"></i></span>
                                                        <span class="mailbox-attachment-icon" th:if="${m.getPersonalDocumentName().contains('.txt')}"><i class="fa fa-file-word-o"></i></span>
                                                        <span class="mailbox-attachment-icon has-img" th:if="${m.getPersonalDocumentName().contains('.png')}"><img th:src="@{getfileimgpng(fileName='/home/marwen/Bureau/uploads/'+${m.getPersonalDocumentName()})}" alt="Attachment"></span>
                                                        <span class="mailbox-attachment-icon has-img" th:if="${m.getPersonalDocumentName().contains('.jpg')}"><img th:src="@{getfileimgpng(fileName='/home/marwen/Bureau/uploads/'+${m.getPersonalDocumentName()})}" alt="Attachment"></span>

                                                        <div class="mailbox-attachment-info">
                                                            <a th:if="${m.getPersonalDocumentName().contains('.txt')}" th:href="@{getfiletxt(fileName='/home/marwen/Bureau/uploads/'+${m.getPersonalDocumentName()})}" class="mailbox-attachment-name" th:text="${m.getPersonalDocumentName()}"><i class="fa fa-paperclip"></i></a>
                                                            <a th:if="${m.getPersonalDocumentName().contains('.pdf')}" th:href="@{getfile(fileName='/home/marwen/Bureau/uploads/'+${m.getPersonalDocumentName()})}" class="mailbox-attachment-name" th:text="${m.getPersonalDocumentName()}"><i class="fa fa-paperclip"></i></a>
                                                            <a th:if="${m.getPersonalDocumentName().contains('.png')}" th:href="@{getfileimgpng(fileName='/home/marwen/Bureau/uploads/'+${m.getPersonalDocumentName()})}" class="mailbox-attachment-name" th:text="${m.getPersonalDocumentName()}"><i class="fa fa-paperclip"></i></a>
                                                            <a th:if="${m.getPersonalDocumentName().contains('.jpg')}" th:href="@{getfileimgpng(fileName='/home/marwen/Bureau/uploads/'+${m.getPersonalDocumentName()})}" class="mailbox-attachment-name" th:text="${m.getPersonalDocumentName()}"><i class="fa fa-paperclip"></i></a>

                                                            <span class="mailbox-attachment-size">
                          1,245 KB
                          <a th:href="@{downloadfile/__${m.getPersonalDocumentName()}__}" class="btn btn-default btn-sm float-right"><i class="fa fa-cloud-download"></i></a>
                        </span>
                                                        </div>
                                                    </li>

                                                </ul>
                                            </div>
                                            <div class="card-footer">
                                                <ul class="btn-group">
                                                    <li th:each="page:${pages}"  class="btn" th:classappend="${page==currentPage}?btn-primary:''"><a th:text="${page}" style="color: #000000" th:href="@{userprofile(username=${userProfile.getUsername()},page=${page},search=${search})}"></a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        </div>
                                        <!-- /.row -->
                                    <!-- /.post -->
                                </div>


                                <!-- /.tab-pane -->
                            </div>
                            <!-- /.tab-content -->
                        </div><!-- /.card-body -->
                    </div>
                    <!-- /.nav-tabs-custom -->
                </div>

            </div><!-- /.container-fluid -->
        </section>
    </div>
    <!-- /.content-wrapper -->
    <footer class="main-footer">
        <div class="float-right d-none d-sm-block">
            <b>Version</b> 1.0.0-alpha
        </div>
        <strong>Copyright &copy; 2018 <a href="/">JF Marwen</a>.</strong> All rights
        reserved.
    </footer>

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
        <!-- Control sidebar content goes here -->
    </aside>
    <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<!-- jQuery -->
<script th:src="@{plugins/jquery/jquery.min.js}"></script>
<!-- Bootstrap 4 -->
<script th:src="@{plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>
<!-- FastClick -->
<script th:src="@{plugins/fastclick/fastclick.js}"></script>
<script th:src="@{plugins/jvectormap/jquery-jvectormap-1.2.2.min.js}"></script>
<script th:src="@{plugins/jvectormap/jquery-jvectormap-world-mill-en.js}"></script>
<!-- AdminLTE App -->
<script th:src="@{dist/js/adminlte.min.js}"></script>
<!-- AdminLTE for demo purposes -->
<script th:src="@{dist/js/demo.js}"></script>
<script th:src="@{plugins/sparkline/jquery.sparkline.min.js}"></script>
<script th:src="@{plugins/slimScroll/jquery.slimscroll.min.js}"></script>
<script th:src="@{plugins/chartjs-old/Chart.min.js}"></script>

<!-- PAGE SCRIPTS -->
<script th:src="@{dist/js/pages/dashboard2.js}"></script>
</body>
</html>
